<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ff0002" >
	<select id="getHistoricalPriceBySymbol" parameterType="com.ff.fdemo.model.FF0002Model" resultType="com.ff.fdemo.model.FF0002Model">
		select his_price_id,
			   symbol,
			   trading_date,
			   open_price,
			   high_price,
			   low_price,
			   close_price,
			   volume,
			   market
		from sto_his_price
		where 1=1
		<if test="symbol != null and symbol != '' ">
			and symbol = #{symbol}
		</if>
	</select>
	<insert id="insertHistoricalPrice" parameterType="com.ff.fdemo.model.FF0002Model" useGeneratedKeys="true" keyProperty="his_price_id" keyColumn="his_price_id">
		insert into sto_his_price
				   (
				   	   his_price_id,
					   symbol,
					   trading_date,
					   open_price,
					   high_price,
					   low_price,
					   close_price,
					   volume,
					   market
					) 
					
						values
					(
					   nextval('sto_his_price_his_price_id_seq'),
					   #{symbol},
					   #{trading_date},
					   #{open_price},
					   #{high_price},
					   #{low_price},
					   #{close_price},
					   #{volume},
					   'hose'
					)
	</insert>
</mapper>